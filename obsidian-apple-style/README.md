# 🍎 Apple Style Formatter

优雅的 Obsidian 插件，提供苹果风格的 Markdown 排版和预览。

![Version](https://img.shields.io/badge/version-1.0.0-blue)
![Obsidian](https://img.shields.io/badge/Obsidian-0.15.0+-purple)
![License](https://img.shields.io/badge/license-MIT-green)

## ✨ 特性

- 🎨 **苹果官方配色** - 极简黑白灰配色系统
- 🔤 **San Francisco 字体** - 使用苹果系统字体栈
- 📐 **完美间距** - 8px 基准的设计系统
- 🌬️ **充足留白** - 舒适的阅读体验
- 🎯 **圆角设计** - 柔和的视觉效果
- ⚡ **实时预览** - 即时查看排版效果
- 📱 **响应式** - 适配各种屏幕尺寸
- 🎛️ **可定制** - 三种字体大小预设

## 📸 预览

### 标题层次（三级系统）

```markdown
# H1 主要章节标题
## H2 次级章节标题
### H3 小节标题
```

- **H1**: 28px, 700 粗体, 浅灰下划线
- **H2**: 21px, 600 中粗, 深灰左边框
- **H3**: 18px, 500 中等, 无装饰

### 段落和引用

- **普通段落**：采用 1.8 行高和 0.02em 字间距，提供舒适的书籍阅读体验，段落间距 12px
- **大分段**：使用三个连字符 --- 标记（完全不可见），产生 24px 间距
- **引用块**：带有浅灰色的左侧边框和柔和的灰色背景

### 代码展示

- **行内代码**：粉红色文字，浅灰背景，圆角边框
- **代码块**：等宽字体，浅灰背景，带边框和圆角

## 🚀 安装

### 方法 1: 手动安装（推荐）

1. 下载最新版本
2. 解压到 Obsidian vault 的 `.obsidian/plugins/` 目录
3. 在 Obsidian 设置中启用插件

```bash
cd /path/to/your/vault/.obsidian/plugins/
git clone https://github.com/yourname/obsidian-apple-style
cd obsidian-apple-style
```

### 方法 2: 从源码构建

```bash
# 克隆仓库
git clone https://github.com/yourname/obsidian-apple-style
cd obsidian-apple-style

# 安装依赖
npm install

# 构建
npm run build
```

## 📖 使用方法

### 基础使用

1. **打开预览面板**
   - 点击左侧边栏的 🍎 图标
   - 或使用命令面板: `Ctrl/Cmd + P` → "打开 Apple 风格预览"

2. **查看效果**
   - 在 Markdown 文件中编辑内容
   - 预览面板会自动显示苹果风格的排版

3. **调整设置**
   - 在预览面板顶部选择字体大小
   - 在设置中配置默认行为

### 快捷操作

- **刷新预览**: 点击工具栏的 🔄 按钮
- **复制 HTML**: 点击 📋 按钮复制格式化的 HTML
- **切换字体**: 使用下拉菜单选择 小号/中号/大号

## ⚙️ 设置

### 默认字体大小

选择预览时使用的默认字体大小：

- **小号** (14px) - 适合手机阅读
- **中号** (16px) - 推荐，平衡的阅读体验
- **大号** (18px) - 适合大屏幕

### 自动预览

启用后，打开预览面板时会自动加载当前文档。

### 显示行号

在代码块中显示行号（即将支持）。

## 🎨 设计系统

### 核心设计理念

- **书籍风格排版** - 紧凑舒适的段落间距，接近纸质书阅读体验
- **克制的配色** - 灰色管结构，蓝色管交互
- **渐进式层级** - 通过字号、字重、装饰区分标题层次
- **上下文感知** - 自动调整不同元素后的间距

---

### 📏 标题系统（三级）

采用简洁的三级标题系统，通过字号、字重、装饰实现清晰层级：

| 标题 | 字号 | 字重 | 装饰 | 上边距 | 下边距 | 行高 |
|------|------|------|------|--------|--------|------|
| **H1** | 28px | 700 | 浅灰下划线 (1px) | 48px | 24px | 1.4 |
| **H2** | 21px | 600 | 深灰左边框 (3px) | 32px | 16px | 1.5 |
| **H3** | 18px | 500 | 无装饰 | 24px | 12px | 1.6 |

**视觉效果：**
- **H1** - 标题下方有细细的浅灰色横线
- **H2** - 标题左侧有粗粗的深灰色竖线
- **H3** - 无任何装饰，靠字号和字重区分

---

### 🎨 配色系统

基于**苹果官方配色**，采用克制的灰色系为主：

| 元素 | 颜色 | 色值 | 用途 |
|------|------|------|------|
| **主文本** | 近黑色 | `#1d1d1f` | 正文、标题文字 |
| **次要文本** | 中灰 | `#6e6e73` | 辅助说明、H2 边框 |
| **三级文本** | 浅灰 | `#86868b` | 更次要的文字 |
| **分隔线** | 极浅灰 | `#d2d2d7` | H1 下划线、引用块边框 |
| **背景** | 纯白 | `#ffffff` | 页面背景 |
| **表面** | 极浅灰 | `#f5f5f7` | 引用块背景 |
| **强调色** | 苹果蓝 | `#0071e3` | **仅用于链接** |

**配色原则：**
- ✅ 灰色系 = 结构性元素（标题、分隔、引用）
- ✅ 蓝色 = 交互元素（只有链接）
- ✅ 黑色 = 内容文字（最高优先级）

---

### 📐 段落间距系统（书籍风格）

采用**紧凑但不拥挤**的书籍排版标准：

#### 基础间距

- **正文行高：** 1.8（舒适的行间距）
- **正文字间距：** 0.02em（轻微增加可读性）
- **普通段落间距：** 12px（书籍标准）

#### 大分段标记

使用三个连字符 `---` 标记段落组分隔，特点：
- **完全不可见** - 不显示任何线条
- **产生大间距** - 上下各 24px（约 1 行空白）
- **使用场景** - 标记新的段落组、主题转换

**示例：**
- 段落A
- 段落B（12px 间距）
- ---（大分段标记，不可见）
- 段落C（24px 间距）
- 段落D

#### 上下文自动间距

智能调整不同元素后的段落间距：

| 场景 | 间距 | 说明 |
|------|------|------|
| 标题后第一段 | 0 | 利用标题的下边距 |
| 普通段落间 | 12px | 紧凑舒适 |
| 列表后段落 | +8px | 增加呼吸感 |
| 引用后段落 | +8px | 增加呼吸感 |
| 代码块后段落 | +8px | 增加呼吸感 |
| `---` 后段落 | 24px | 大分段 |

---

### 🔤 字体系统

**正文/标题字体：** 优先使用 San Francisco 字体，依次回退到 Helvetica Neue、PingFang SC（苹方）、Hiragino Sans GB（冬青黑）、Arial

**代码字体：** 优先使用 SF Mono，依次回退到 Menlo、Monaco、Consolas

**字号预设（三档）：**

| 档位 | 正文 | H1 | H2 | H3 | 代码 | 适用场景 |
|------|------|----|----|----|----|----------|
| 小号 | 14px | 22px | 18px | 16px | 12px | 手机阅读 |
| **中号** | 16px | 28px | 21px | 18px | 14px | **推荐** |
| 大号 | 18px | 32px | 24px | 20px | 16px | 大屏幕 |

---

### 📦 间距系统

基于 **8px 基准**的间距系统：

| 名称 | 值 | 用途 |
|------|------|------|
| XS | 4px | 极小间距（内边距） |
| SM | 8px | 小间距（按钮、标签） |
| MD | 16px | 中等间距（卡片、内容块） |
| LG | 24px | 大间距（章节、分段） |
| XL | 32px | 特大间距（主标题） |
| XXL | 48px | 超大间距（顶部标题） |

---

### 🎯 圆角系统

柔和的圆角设计：

| 名称 | 值 | 应用 |
|------|------|------|
| SM | 4px | 按钮、标签、行内代码 |
| MD | 8px | 卡片、代码块、图片容器 |
| LG | 12px | 面板、大型容器 |
| XL | 16px | 特大元素 |

---

### 📊 完整样式规格表

#### H1 主要章节
- 字号：28px
- 字重：700（粗体）
- 行高：1.4
- 字间距：-0.3px（略紧凑）
- 上边距：48px，下边距：24px
- 装饰：底部 1px 浅灰线

#### H2 次级章节
- 字号：21px
- 字重：600（中粗）
- 行高：1.5
- 字间距：-0.2px
- 上边距：32px，下边距：16px
- 装饰：左侧 3px 深灰边框，左内边距 16px

#### H3 小节标题
- 字号：18px
- 字重：500（中等）
- 行高：1.6
- 上边距：24px，下边距：12px
- 装饰：无

#### 正文段落
- 字号：16px
- 行高：1.8
- 字间距：0.02em
- 下边距：12px

#### 引用块
- 字号：16px
- 行高：1.8
- 文字颜色：中灰 #6e6e73
- 背景颜色：极浅灰 #f5f5f7
- 内边距：上下 16px，左右 24px
- 上下外边距：16px
- 左边框：3px 浅灰色
- 右侧圆角：4px

#### 行内代码
- 字号：14px
- 字体：等宽代码字体
- 背景：极浅灰 #f5f5f7
- 文字：粉红 #c7254e
- 内边距：上下 2px，左右 6px
- 圆角：4px

#### 代码块
- 字号：14px
- 字体：等宽代码字体
- 行高：1.6
- 背景：浅灰 #fafafa
- 边框：1px 浅灰色
- 内边距：上下 16px，左右 24px
- 上下外边距：16px
- 圆角：8px

## 🔧 开发

### 开发环境设置

```bash
# 安装依赖
npm install

# 开发模式（自动重新构建）
npm run dev

# 生产构建
npm run build
```

### 项目结构

```
obsidian-apple-style/
├── main.js              # 主插件代码
├── styles.css           # 样式表
├── manifest.json        # 插件配置
├── package.json         # 项目配置
├── themes/              # 主题系统
│   └── apple-theme.js   # 苹果主题
└── README.md           # 文档
```

### 自定义主题

编辑 `themes/apple-theme.js` 来自定义配色和样式：

```javascript
static COLORS = {
  primary: '#1d1d1f',      // 修改主文本颜色
  accent: '#0071e3',       // 修改强调色
  // ...
};
```

## 🎯 路线图

- [ ] 支持更多主题（暗色模式、彩色主题）
- [ ] 代码块语法高亮
- [ ] 代码块行号显示
- [ ] 导出为 PDF/HTML
- [ ] 自定义 CSS 支持
- [ ] 快捷键配置
- [ ] 多语言支持

## 🤝 贡献

欢迎贡献！请查看 [贡献指南](CONTRIBUTING.md)。

### 贡献方式

1. Fork 本仓库
2. 创建特性分支 (`git checkout -b feature/AmazingFeature`)
3. 提交更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 开启 Pull Request

## 📄 许可证

本项目采用 MIT 许可证 - 查看 [LICENSE](LICENSE) 文件了解详情。

## 🙏 致谢

- 设计灵感来自 [Apple Design Resources](https://developer.apple.com/design/resources/)
- 感谢 [Obsidian](https://obsidian.md) 团队提供优秀的笔记软件
- 感谢所有贡献者

## 📮 联系方式

- GitHub Issues: [提交问题](https://github.com/yourname/obsidian-apple-style/issues)
- Email: your.email@example.com
- Twitter: [@yourhandle](https://twitter.com/yourhandle)

## 🌟 支持

如果这个项目对你有帮助，请给一个 ⭐️！

---

用 🍎 和 ❤️ 制作
